@if (owner(); as ownerData) {
  <section class="owner-profile-page">
    <a class="owner-profile-page__back-link" [routerLink]="['/owners']"> Back to Owners </a>

    <header class="owner-profile-page__header">
      <div class="owner-profile-page__identity">
        <h1 class="owner-profile-page__name">{{ ownerData.realName }}</h1>
        <p class="owner-profile-page__team">{{ mostRecentTeamName() }}</p>
        <p class="owner-profile-page__record">All-Time Record: {{ allTimeRecord() }}</p>
      </div>
      <span
        class="owner-profile-page__active-tag"
        [class.owner-profile-page__active-tag--inactive]="!isActiveOwner()"
      >
        {{ isActiveOwner() ? 'Active' : 'Inactive' }}
      </span>
    </header>

    <section class="owner-profile-page__section owner-profile-page__section--summary">
      <div class="owner-profile-page__box">
        <h2 class="owner-profile-page__box-title">Name History (Last Used)</h2>
        <ul class="owner-profile-page__name-history">
          @for (item of nameHistory(); track item.name) {
            <li class="owner-profile-page__name-item">
              <span>{{ item.name }} ({{ item.lastYearUsed ?? '--' }})</span>
            </li>
          }
        </ul>
      </div>

      <div class="owner-profile-page__box">
        <h2 class="owner-profile-page__box-title">
          Active Seasons ({{ ownerData.activeSeasons.length }})
        </h2>
        <div class="owner-profile-page__years-grid">
          @for (season of activeSeasonYears(); track season.year) {
            <span
              class="owner-profile-page__year-pill"
              [class.owner-profile-page__year-pill--championship]="season.isChampion"
              [class.owner-profile-page__year-pill--toilet]="season.isToiletBowlChampion"
            >
              {{ season.year }}
            </span>
          }
        </div>
      </div>
    </section>

    <section class="owner-profile-page__section">
      <h2 class="owner-profile-page__section-title">Awards</h2>

      <div class="owner-profile-page__awards-grid">
        <app-stat-card
          title="Most Points in a Season"
          [footer]="formatSeasonFooter(seasonPointsAwards().highest?.year ?? null)"
        >
          <app-stat-value [value]="seasonPointsAwards().highest?.points ?? '--'" />
        </app-stat-card>

        <app-stat-card
          title="Fewest Points in a Season"
          [footer]="formatSeasonFooter(seasonPointsAwards().lowest?.year ?? null)"
        >
          <app-stat-value [value]="seasonPointsAwards().lowest?.points ?? '--'" />
        </app-stat-card>

        <app-stat-card
          title="Most Points in a Game"
          [footer]="formatGameFooter(gamePointsAwards().highest)"
        >
          <app-stat-value [value]="gamePointsAwards().highest?.points ?? '--'" />
        </app-stat-card>

        <app-stat-card
          title="Fewest Points in a Game"
          [footer]="formatGameFooter(gamePointsAwards().lowest)"
        >
          <app-stat-value [value]="gamePointsAwards().lowest?.points ?? '--'" />
        </app-stat-card>

        <app-stat-card
          title="Starter Most Points in a Season"
          [subtitle]="starterAwards().bestSeason?.playerName ?? ''"
          [footer]="formatSeasonFooter(starterAwards().bestSeason?.year ?? null)"
        >
          <app-stat-value
            [value]="formatPointsToTwoDecimals(starterAwards().bestSeason?.points)"
          />
        </app-stat-card>

        <app-stat-card
          title="Starter Most Points in a Game"
          [subtitle]="starterAwards().bestGame?.playerName ?? ''"
          [footer]="formatStarterGameFooter(starterAwards().bestGame)"
        >
          <app-stat-value
            [value]="formatPointsToTwoDecimals(starterAwards().bestGame?.points)"
          />
        </app-stat-card>
      </div>
    </section>

    <section class="owner-profile-page__section">
      <div class="owner-profile-page__box">
        <h2 class="owner-profile-page__box-title">Head-to-Head Records</h2>
        <div class="owner-profile-page__record-list">
          @for (item of headToHeadRecords(); track item.ownerName) {
            <div class="owner-profile-page__record-row">
              <span class="owner-profile-page__record-owner">{{ item.ownerName }}</span>
              <span class="owner-profile-page__record-value">{{ item.record }}</span>
              <span class="owner-profile-page__record-pct">{{ item.winPct }}</span>
            </div>
          }
        </div>
      </div>

      <div class="owner-profile-page__box">
        <h2 class="owner-profile-page__box-title">All-Time All-Play Records</h2>
        <div class="owner-profile-page__record-list">
          @for (item of allPlayRecords(); track item.ownerName) {
            <div class="owner-profile-page__record-row">
              <span class="owner-profile-page__record-owner">{{ item.ownerName }}</span>
              <span class="owner-profile-page__record-value">{{ item.record }}</span>
              <span class="owner-profile-page__record-pct">{{ item.winPct }}</span>
            </div>
          }
        </div>
      </div>
    </section>
  </section>
}
